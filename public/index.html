<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOMETHINGWONDERFUL</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/style.css?v=15">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body>
  <input type="range" id="volumeControl" min="0" max="100" step="1" value="50">
  <audio id="backgroundAudio" src="https://somethingwonderful123.s3.amazonaws.com/Both+Sides+Now+(Instrumental).mp3"
    loop></audio>
  <div class="container">
    <h1 class="my-5 text-center">SOMETHINGWONDERFUL</h1>
    <p class="lead text-center mb-5">a steve jobs tribute, a creativeLorem ipsum dolor sit amet, consectetur adipiscing
      elit. Sed euismod est in justo
      vulputate, eget porttitor quam tincidunt. Integer vel odio eget arcu consectetur.
    </p>
    <div class="chevron-container">
      <div class="chevron-text">Tap image to play audio</div>
      <div class="chevron"></div>
    </div>
  </div>
  <!-- break 游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리-------------------------->
  <!-- break -------------------------->
  <!-- break -------------------------->
  <div class="row">
    <div class="col-8 mx-auto mb-custom" style="transform: rotate(-5deg);">Element 1
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-light btn-lg play-pause" data-audio="audio-1">
            <i class="fas fa-volume-up"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- break 游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리-------------------------->

  <!-- break -------------------------->
  <div class="row">
    <div class="col-8 mx-auto">
      <h2>the next memo A memo from Steve Jobs on the value of the individual contributor when given uninterrupted
        time to craft quality products.
      </h2>
    </div>
    <div class="col-8 mx-auto mb-custom" style="transform: rotate(2deg);">
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-19~1500.webp" alt="Image"
          class="card-img-top rounded-20 fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <div class="col-md-6">
            <button class="btn btn-light btn-lg btn-block play-pause" data-audio="next-memo">
              <i class="fas fa-volume-up"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-12 mb-custom">
    <div class="card wiggle mb-custom">
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-19~1500.webp" alt="Image"
          class="card-img-top rounded-20 fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <div class="col-md-6">
            <button class="btn btn-light btn-lg btn-block play-pause" data-audio="next-memo">
              <i class="fas fa-volume-up"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="transform: rotate(4deg);">Element 2
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
        </div>
      </div>
    </div>
  </div>
  <!-- break -------------------------->
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red; transform: rotate(-5deg);">Element 1
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
        </div>
      </div>
    </div>
  </div>
  <!-- break -------------------------->
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red; transform: rotate(4deg);">Element 1
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
        </div>
      </div>
    </div>
  </div>
  <!-- break -------------------------->
  <!-- break -------------------------->
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red">Element 1
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
        </div>
      </div>
    </div>
  </div>
  <!-- break -------------------------->
  <!-- break -------------------------->
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red">Element 1
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
        </div>
      </div>
    </div>
  </div>
  <!-- break -------------------------->
  <!-- break -------------------------->

  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red">Element 1
      <div class="image-container position-relative">
        <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image" class="card-img-top fade-in">
        <div class="overlay d-flex align-items-center justify-content-center">
          <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
        </div>
      </div>
    </div>
  </div>
  <!-- break -->
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red">Element 2</div>
  </div>
  <!-- break -->
  <div class="row">
    <div class="col-8 col-md-6 mx-auto mb-custom" style="background-color: red">Element 3</div>
  </div>
  <!-- break -->
  <!-- break -->
  <!-- break -------------------------->
  <!-- break -------------------------->
  <!-- break -------------------------->
  <!-- break -------------------------->
  <!-- break -------------------------->

  <div class="row">
    <div class="col-md-12 mb-custom">
      <div class="card wiggle mb-custom">
        <div class="image-container position-relative">
          <img src="https://book.stevejobsarchive.com/photos/photo-33~1500.webp" alt="Image"
            class="card-img-top rounded-20 fade-in">
          <div class="overlay d-flex align-items-center justify-content-center">
            <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
          </div>
        </div>
      </div>
      <div class="col-md-12 mb-custom">
        <div class="card wiggle mb-custom">
          <div class="image-container position-relative">
            <img src="https://book.stevejobsarchive.com/photos/photo-14~1500.webp" alt="Image"
              class="card-img-top rounded-20 fade-in">
            <div class="overlay d-flex align-items-center justify-content-center">
              <button class="btn btn-primary play-pause" data-audio="audio-1">Play</button>
            </div>
          </div>
        </div>
        <!-- NEW CARD -->

      </div>
    </div>

    <audio id="audio-1" src="https://somethingwonderful123.s3.amazonaws.com/blaze+best.mp3"></audio>
    <audio id="next-memo" src="https://somethingwonderful123.s3.amazonaws.com/next-memo.mp3"></audio>
    <!-- Add more audio elements for each image with unique IDs -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        function isElementInViewport(el) {
          const rect = el.getBoundingClientRect();
          const windowHeight = (window.innerHeight || document.documentElement.clientHeight);
          return (
            rect.top >= 0 &&
            rect.top <= windowHeight * 0.7 &&
            rect.bottom >= windowHeight * 0.3
          );
        }

        function fadeInOnScroll() {
          $('.fade-in').each(function () {
            if (isElementInViewport(this)) {
              $(this).addClass('visible');
            }
          });
        }

        $(window).on('scroll', fadeInOnScroll);
        fadeInOnScroll(); // Call the function once on page load to handle elements already in the viewport
      });
    </script>
    <script>
      // const playPauseButtons = document.querySelectorAll('.play-pause');
      // playPauseButtons.forEach(button => {
      //   button.addEventListener('click', () => {
      //     const audioId = button.getAttribute('data-audio');
      //     const audio = document.getElementById(audioId);

      //     if (audio.paused) {
      //       audio.play();
      //       button.textContent = 'Pause';
      //     } else {
      //       audio.pause();
      //       button.textContent = 'Play';
      //     }
      //   });
      // });
      // <!-- break 游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리游리-------------------------->

      // const playPauseButtons = document.querySelectorAll('.play-pause');
      // playPauseButtons.forEach(button => {
      //   button.addEventListener('click', () => {
      //     const audioId = button.getAttribute('data-audio');
      //     const audio = document.getElementById(audioId);

      //     if (audio.paused && audio.currentTime >= 0 && !audio.ended) {
      //       audio.play();
      //       // button.textContent = 'Pause';
      //       button.classList.toggle('playing');
      //       progress(button, audio);
      //     } else {
      //       audio.pause();
      //       // button.textContent = 'Play';
      //       // button.innerHTML = '<i class="fas fa-play"></i>';
      //       button.classList.toggle('playing');
      //       reset(button, audio);
      //     }
      //   });
      // });
      // // intesection observer here

      // const observer = new IntersectionObserver((entries, observer) => {
      //   entries.forEach(entry => {
      //     // Perform actions based on the intersection status
      //     if (entry.isIntersecting) {
      //       // The button is visible
      //     } else {
      //       // The button is not visible
      //       console.log('Button out of viewport:', entry.target.getAttribute('data-audio'));
      //     }
      //   });
      // });

      // const playPauseButtons = document.querySelectorAll('.play-pause');

      // playPauseButtons.forEach(button => {
      //   // Add your existing code for handling button clicks and other functionality here

      //   // The reset function stops the song, resets its currentTime to 0, and toggles the 'playing' class on the button
      //   function reset(btn, song) {
      //     if (btn.classList.contains('playing')) {
      //       btn.classList.toggle('playing');
      //     }
      //     song.pause();
      //     song.currentTime = 0;
      //     // btn.textContent = 'Play';
      //   }
      //   // The progress function updates the button's boxShadow to visualize the song's progress and recursively calls itself
      //   function progress(btn, song) {
      //     setTimeout(function () {
      //       var end = song.duration;
      //       var current = song.currentTime;
      //       var percent = current / (end / 100);
      //       //check if song is at the end
      //       if (current == end) {
      //         reset(btn, song);
      //       }
      //       //set inset box shadow
      //       btn.style.boxShadow = "inset " + btn.offsetWidth * (percent / 100) + "px 0px 0px 0px rgba(0,0,0,0.125)"
      //       //call function again
      //       progress(btn, song);
      //     }, 133.7);
      //   }
      //   // Now you can use the button variable with the Intersection Observer
      //   observer.observe(button);
      // });
      // Query all play-pause buttons
      const playPauseButtons = document.querySelectorAll('.play-pause');

      // Add event listeners to each play-pause button
      playPauseButtons.forEach(button => {
        button.addEventListener('click', () => {
          const audioId = button.getAttribute('data-audio');
          const audio = document.getElementById(audioId);

          // Toggle play/pause state and update button appearance
          if (audio.paused && audio.currentTime >= 0 && !audio.ended) {
            audio.play();
            button.classList.toggle('playing');
            progress(button, audio);
          } else {
            audio.pause();
            button.classList.toggle('playing');
            reset(button, audio);
          }
        });
      });

      // Create Intersection Observer to detect button visibility
      const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) {
            console.log('Button out of viewport:', entry.target.getAttribute('data-audio'));
            const button = entry.target;
            const audioId = button.getAttribute('data-audio');
            const audio = document.getElementById(audioId);
            audio.pause();
            button.classList.remove('playing');
            reset(button, audio);
          }
        });
      });

      // Observe each play-pause button for visibility changes
      playPauseButtons.forEach(button => {
        observer.observe(button);
      });

      // Reset function: stop the song, reset its currentTime, and toggle the 'playing' class on the button
      function reset(btn, song) {
        if (btn.classList.contains('playing')) {
          btn.classList.toggle('playing');
        }
        song.pause();
        song.currentTime = 0;
      }

      // Progress function: update button's boxShadow to visualize song progress and recursively call itself
      function progress(btn, song) {
        setTimeout(function () {
          var end = song.duration;
          var current = song.currentTime;
          var percent = current / (end / 100);
          if (current == end) {
            reset(btn, song);
          }
          btn.style.boxShadow = "inset " + btn.offsetWidth * (percent / 100) + "px 0px 0px 0px rgba(0,0,0,0.125)"
          progress(btn, song);
        }, 133.7);
      }

    </script>
    <script src="/scripts.js"></script>
</body>

</html>